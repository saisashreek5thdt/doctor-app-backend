{
	"swagger": "2.0",
	"info": {
		"version": "1.0.0",
		"title": "Doctor App backend",
		"description": "Doctor App backend API",
		"license": {
			"name": "MIT",
			"url": "https://opensource.org/licenses/MIT"
		}
	},
	"host": "localhost:5000",
	"basePath": "/",
	"tags": [
		{
			"name": "Users",
			"description": "API for users in the system"
		}
	],
	"schemes": ["http"],
	"consumes": ["application/json"],
	"produces": ["application/json"],

	"paths": {
		"/api/v1/doctors/add-patient": {
			"post": {
				"tags": ["Doctor"],
				"summary": "Add a new patient",
				"parameters": [
					{
						"name": "patient",
						"in": "body",
						"description": "Patient is to be added",
						"schema": {
							"$ref": "#/definitions/Patient"
						}
					}
				],
				"produces": ["application/json"],
				"responses": {
					"200": {
						"description": "Patient added successfully"
					}
				}
			}
		},
		"/api/v1/doctors/get-all-patients": {
			"get": {
				"tags": ["Doctor"],
				"summary": "Get all patients added by the doctor",
				"responses": {
					"200": {
						"description": "Patients fetched successfuly",
						"schema": {
							"$ref": "#/definitions/Patient"
						}
					}
				}
			}
		},
		"/api/v1/doctors/patient/:patientId": {
			"get": {
				"tags": ["Doctor"],
				"summary": "Get a patient",
				"parameters": [
					{
						"name": "patientId",
						"in": "path",
						"description": "unique id of the patient"
					}
				],
				"responses": {
					"200": {
						"description": "Patient fetched successfully",
						"schema": {
							"$ref": "#/definitions/Patient"
						}
					}
				}
			}
		},
		"/api/v1/doctors/patient/:patientId": {
			"put": {
				"tags": ["Doctor"],
				"summary": "Update a patient",
				"parameters": [
					{
						"name": "patientId",
						"in": "path",
						"description": "patient to be updated"
					},
					{
						"name": "patient",
						"in": "body",
						"description": "Patient to be updated",
						"schema": {
							"$ref": "#/definitions/Patient"
						}
					}
				],
				"responses": {
					"200": {
						"description": "Patient updated successfully"
					}
				}
			}
		},
		"/api/v1/doctors/add-diet-chart": {
			"post": {
				"tags": ["Doctor"],
				"summary": "Add a new diet chart",
				"parameters": [
					{
						"name": "dietChart",
						"in": "body",
						"description": "Diet chart to be addedd",
						"schema": {
							"$ref": "#/definitions/dietChart"
						}
					}
				],
				"produces": ["application/json"],
				"responses": {
					"200": {
						"description": "Diet chart added successfully"
					}
				}
			}
		},
		"/api/v1/doctors/add-form": {
			"post": {
				"tags": ["Doctor"],
				"summary": "Add a new form",
				"parameters": [
					{
						"name": "form",
						"in": "body",
						"description": "Form chart to be addedd",
						"schema": {
							"$ref": "#/definitions/Form"
						}
					}
				],
				"produces": ["application/json"],
				"responses": {
					"200": {
						"description": "Form added successfully"
					}
				}
			}
		}
	},

	"definitions": {
		"Patient": {
			"type": "object",
			"properties": {
				"doctorId": {
					"type": "String",
					"example": "6871298378217382112",
					"description": "To make a reference to which doctor is adding the patient"
				},
				"patientId": {
					"type": "String",
					"example": "DA-23",
					"description": "Unique id for every patient"
				},
				"logo": {
					"type": "String",
					"example": "link",
					"description": "public url of where the logo is stored"
				},
				"phone": {
					"type": "Number",
					"example": "8983937433",
					"description": "Phone number of the patient",
					"unique": "true"
				},
				"name": {
					"type": "String",
					"example": "John",
					"description": "Patient name"
				},
				"email": {
					"type": "String,",
					"example": "example@gmail.com",
					"description": "Patient mail id"
				},
				"dob": {
					"type": "Date",
					"example": "10-10-2010",
					"description": "Patient DOB"
				},
				"gender": {
					"type": "String",
					"example": "Female",
					"description": "Patient gender"
				},
				"height": {
					"type": "Number",
					"example": "160",
					"description": "Patient height in cm"
				},
				"weight": {
					"type": "Number",
					"example": "160",
					"description": "Patient height in cm"
				},
				"caretakers_name": {
					"type": "String",
					"example": "Jona",
					"description": "Patient's caretakers name"
				},
				"caretakers_relation": {
					"type": "String",
					"example": "Wife",
					"description": "Patient's and caretaker's relation"
				},
				"caretakers_phone": {
					"type": "Number",
					"example": "8792497834",
					"description": "Patient's caretakers phone number"
				},
				"caretakers_time": {
					"type": "String",
					"example": "9:30",
					"description": "Available time of caretaker"
				},
				"health_plan": {
					"type": "String",
					"example": "Cardiac Plan",
					"description": "Health plan"
				},
				"health_plan_date": {
					"type": "Date",
					"example": "10-10-2020",
					"description": "Health program date"
				},
				"team": {
					"type": "String",
					"example": "Team A",
					"description": "Team name"
				},
				"amount": {
					"type": "Number",
					"example": "1500",
					"description": "Amount to pay"
				},
				"payment_mode": {
					"type": "String",
					"example": "UPI",
					"description": "Payment mode"
				},
				"payment_date": {
					"type": "Date",
					"example": "20-10-2020",
					"description": "Expected date of paying"
				},
				"ref_id": {
					"type": "String",
					"example": "7387bhb32",
					"description": "Payment reference Id"
				},
				"next_payment_date": {
					"type":" Date",
					"example": "10-10-2010",
					"description": "Next payment date"
				}
			},
			"required": ["*"]
		},
		"dietChart": {
			"type": "object",
			"properties": {
				"doctorId": {
					"type": "String",
					"example": "6871298378217382112",
					"description": "To make a reference to which doctor is adding the diet chart"
				},
				"calorie_lower": {
					"type": "Number",
					"example": "300",
					"description": "Calorie lower"
				},
				"calorie_upper": {
					"type": "Number",
					"example": "600",
					"description": "Calorie upper"
				},
				"ch_lower": {
					"type": "Number",
					"example": "250",
					"description": "Carbohydrate lower"
				},
				"ch_upper": {
					"type": "Number",
					"example": "900",
					"description": "Carbohydrate high"
				},
				"protiens": {
					"type": "String",
					"example": "Amino acids",
					"description": "protiens"
				},
				"fats": {
					"type": "String",
					"example": "fats",
					"description": "fat"
				},
				"food_type": {
					"type": "String",
					"example": "Non veg",
					"description": "food type"
				},
				"cuisine_type": {
					"type": "String",
					"example": "cuisine type",
					"description": "cuisine type"
				},
				"file": {
					"type": "String",
					"example": "docment",
					"description": "url of the document"
				}
			},
			"required": ["*"]
		},
		"Form": {
			"type": "object",
			"properties": {
				"doctorId": {
					"type": "String",
					"example": "6871298378217382112",
					"description": "To make a reference to which doctor is adding the diet chart"
				},
				"patientId": {
					"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
				},
				"question_title": {
					"type": "String",
					"example": "Survey",
					"description": "a question title"
				},
				"questions": {
					"type": "arrray",
					"items": {
						"type": "object",
						"properties": {
							"type": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							},
							"question": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							},
							"choise1": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							},
							"choise2": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							},
							"choise3": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							},
							"choise4": {
								"type": "String",
					"example": "DA-23",
					"description": "Reference to a patient, which th form is assigning"
							}
						}
					}
				}
			},
			"required": ["projectId", "title"]
		},
		"LeaveRequest": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string",
					"description": "Auto generated id by mongodb."
				},
				"userId": {
					"type": "string",
					"description": "Id of the user who created the leave request."
				},
				"userName": {
					"type": "string",
					"description": "Name of the user who created the leave request."
				},
				"status": {
					"type": "string",
					"enum": ["pending", "approved", "rejected"],
					"description": "status of the leave request",
					"default": "pending"
				},

				"startDate": {
					"type": "string",
					"description": "start of the leave date"
				},
				"endDate": {
					"type": "string",
					"description": "end of the leave date"
				},
				"days": {
					"type": "number",
					"description": "number of days"
				},
				"reason": {
					"type": "string",
					"description": "reason for leave"
				}
			}
		},
		"LogBook": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string",
					"description": "Auto generated id by mongodb."
				},
				"visitorName": {
					"type": "string",
					"description": "Name of the site visitor."
				},
				"reason": {
					"type": "string",
					"description": "reason for visit"
				},
				"createdOn": {
					"type": "string",
					"description": "date and time of adding entry"
				}
			}
		},
		"feedback": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string"
				},
				"projectId": {
					"type": "string"
				},
				"messages": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"_id": {
								"type": "string"
							},
							"message": {
								"type": "string"
							},
							"status": {
								"type": "string"
							},
							"category": {
								"type": "string"
							}
						}
					}
				},
				"isEditable": { "type": "boolean" },
				"remarks": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"_id": { "type": "string" },
							"remark": { "type": "string" }
						}
					}
				},
				"createdAt": { "type": "String" }
			}
		},
		"loginBody": {
			"type": "object",
			"properties": {
				"email": {
					"type": "string"
				},
				"password": {
					"type": "string"
				}
			}
		},
		"web-notifications": {
			"type": "object",
			"properties": {
				"projectId": {
					"type": "id of project"
				},
				"userName": {
					"type": "String"
				},
				"site_name": {
					"type": "String"
				},
				"type": {
					"type": "String"
				},
				"status": {
					"type": "String"
				}
			}
		},
		"has-web-notification": {
			"type": "object",
			"properties": {
				"hasNotify": {
					"type": "boolean"
				},
				"notifyId": {
					"type": "String"
				}
			}
		},
		"client-app-login": {
			"type": "object",
			"properties": {
				"success": {
					"type": "boolean"
				},
				"message": {
					"type": "String"
				},
				"data": {
					"type": "object",
					"properties": {
						"token": {
							"type": "String"
						},
						"userName": {
							"type": "String"
						}
					}
				}
			}
		},
		"loginResponse": {
			"required": ["name", "_id", "companies"],
			"properties": {
				"token": {
					"type": "string"
				},
				"user": {
					"type": "object",
					"properties": {
						"role": {
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					}
				}
			}
		},
		"projectTeam": {
			"type": "array",
			"items": {
				"type": "id of users"
			}
		},
		"teamBody": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"email": {
					"type": "string"
				},
				"password": {
					"type": "string"
				},
				"role": {
					"type": "string"
				},
				"department": {
					"type": "string"
				}
			}
		},
		"updateUser": {
			"required": ["name", "companies"],
			"properties": {
				"isPublic": {
					"type": "boolean"
				},
				"name": {
					"type": "string"
				},
				"books": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": {
								"type": "string"
							},
							"amount": {
								"type": "number"
							}
						}
					}
				},
				"companies": {
					"type": "array",
					"items": {
						"type": "string"
					}
				}
			}
		},
		"Users": {
			"type": "array",
			"$ref": "#/definitions/User"
		},
		"siteUpdateResponse": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string"
				},
				"projectId": {
					"type": "string"
				},
				"type": {
					"type": "string"
				},
				"vendor": {
					"type": "string"
				},
				"work": {
					"type": "string"
				},
				"labour_count": {
					"type": "number"
				},
				"per_complete": {
					"type": "number"
				},
				"per_planned_next": {
					"type": "number"
				},
				"labour_count_planned": {
					"type": "number"
				},
				"remark": {
					"type": "string"
				}
			}
		},
		"siteUpdateResponses": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/siteUpdateResponse"
			}
		},
		"projectBody": {
			"type": "object",
			"properties": {
				"site_name": {
					"type": "string"
				},
				"uid": {
					"type": "String"
				},
				"location": {
					"type": "string"
				},
				"size": {
					"type": "number"
				},
				"team": {
					"type": "array",
					"items": {
						"type": "id of user"
					}
				},
				"labour_count": {
					"type": "number"
				}
			}
		},
		"projectResponse": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string"
				},
				"site_name": {
					"type": "string"
				},
				"uid": {
					"type": "String"
				},
				"location": {
					"type": "string"
				},
				"size": {
					"type": "number"
				},
				"team": {
					"type": "object",
					"properties": {
						"_id": {
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					}
				},
				"labour_count": {
					"type": "number"
				},
				"creator": {
					"type": "string"
				}
			}
		},
		"projectResponses": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/projectResponse"
			}
		},
		"purchaseResponse": {
			"type": "object",
			"properties": {
				"projectId": {
					"type": "string"
				},
				"uid": {
					"type": "String"
				},
				"items": {
					"type": "object",
					"properties": {
						"material": { "type": "String" },
						"quantity": { "type": "String" }
					}
				},
				"itemsFileUrl": { "type": "String" },
				"fileUrl": { "type": "String" },
				"requestDate": {
					"type": "string"
				},
				"requiredDate": {
					"type": "string"
				},
				"status": {
					"type": "object",
					"properties": {
						"delivered": {
							"type": "boolean",
							"default": "false"
						},
						"qualityCheck": {
							"type": "boolean",
							"default": false
						},
						"processed": {
							"type": "boolean",
							"default": "false"
						},
						"deliveryDateCheck": {
							"type": "boolean",
							"default": "false"
						},
						"completed": {
							"type": "boolean",
							"default": "false"
						}
					}
				},
				"comments": {
					"type": "string"
				},
				"deliveryDate": {
					"type": "Date",
					"default": "undefined"
				}
			}
		},
		"purchaseResponses": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/purchaseResponse"
			}
		},
		"materialDetailResponses": {
			"type": "object",
			"properties": {
				"materials": {
					"type": "string array"
				},
				"units": {
					"type": "string array"
				},
				"days": {
					"type": "integer array"
				},
				"_id": {
					"type": "string array"
				}
			}
		},
		"materialDetailResponse": {
			"type": "object",
			"properties": {
				"materials": {
					"type": "string"
				},
				"units": {
					"type": "string"
				},
				"days": {
					"type": 0
				},
				"_id": {
					"type": "string"
				}
			}
		},
		"purchaseRequestBody": {
			"type": "object",
			"properties": {
				"items": {
					"type": "object",
					"properties": {
						"material": { "type": "String" },
						"quantity": { "type": "String" }
					}
				},
				"itemsFileUrl": { "type": "String" },
				"requiredDate": {
					"type": "Date"
				},
				"comments": {
					"type": "string"
				}
			}
		},
		"materialDetailBody": {
			"type": "object",
			"properties": {
				"material": {
					"type": "string"
				},
				"unit": {
					"type": "string"
				},
				"days": {
					"type": 0
				}
			}
		},
		"deliveryDateBody": {
			"type": "object",
			"properties": {
				"deliveryDate": {
					"type": "Date"
				}
			}
		},
		"analytics": {
			"type": "object",
			"properties": {
				"project_count": { "type": "number" },
				"createdOn": { "type": "date" },
				"active_sites": {
					"type": "number"
				},
				"purchase_requests_today": {
					"type": "number"
				},
				"most_active_project": {
					"type": "string"
				},
				"least_active_project": {
					"type": "string"
				},
				"labour_count": {
					"type": "number"
				}
			}
		},
		"supervisor-analytics": {
			"type": "object",
			"properties": {
				"status": { "type": "boolean" },
				"message": { "type": "String" },
				"assignedProjectCount": { "type": "number" },
				"weekTotalLaboursCount": { "type": "number" },
				"monthTotalLaboursCount": { "type": "number" },
				"monthTotalPRCount": { "type": "number" },
				"totalOverdueTasks": { "type": "number" },
				"overallPerformance": { "type": "string" },
				"monthTotalLabourCountByProject": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"siteName": { "type": "string" },
							"count": { "type": "number" }
						}
					}
				}
			}
		},
		"site-update-analytics": {
			"type": "object",
			"properties": {
				"status": { "type": "boolean" },
				"message": { "type": "String" },
				"siteUpdateList": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"type": { "type": "String" },
							"supervisor": { "type": "String" },
							"work": { "type": "String" },
							"labourers": { "type": "number" },
							"site": { "type": "String" }
						}
					}
				},
				"totalLabourers": {
					"type": "number"
				},
				"avgBySupervisor": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": { "type": "String" },
							"labour_count": { "type": "number" },
							"site_updates": { "type": "number" },
							"avg": { "type": "number" }
						}
					}
				},
				"avgBySiteName": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": { "type": "String" },
							"labour_count": { "type": "number" },
							"site_updates": { "type": "number" },
							"avg": { "type": "number" }
						}
					}
				}
			}
		},
		"site-update-analytics-avg": {
			"type": "object",
			"properties": {
				"status": { "type": "boolean" },
				"message": { "type": "String" },
				"avgBySupervisor": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": { "type": "String" },
							"labour_count": { "type": "number" },
							"site_updates": { "type": "number" },
							"avg": { "type": "number" }
						}
					}
				},
				"avgBySiteName": {
					"type": "array",
					"items": {
						"type": "object",
						"properties": {
							"name": { "type": "String" },
							"labour_count": { "type": "number" },
							"site_updates": { "type": "number" },
							"avg": { "type": "number" }
						}
					}
				}
			}
		},
		"taskBody": {
			"type": "object",
			"properties": {
				"projectId": {
					"type": "id of project"
				},
				"description": {
					"type": "string"
				},
				"type": {
					"type": "Date"
				},
				"assignedTo": {
					"type": "id of user"
				},
				"status": {
					"type": "string"
				},
				"deadLine": {
					"type": "object",
					"properties": {
						"date": {
							"type": "date"
						},
						"time": {
							"type": "string"
						}
					}
				}
			}
		},
		"taskResponse": {
			"type": "object",
			"properties": {
				"_id": {
					"type": "string"
				},
				"project": {
					"type": "object",
					"properties": {
						"_id": {
							"type": "string"
						},
						"site_name": {
							"type": "string"
						}
					}
				},
				"description": {
					"type": "string"
				},
				"type": {
					"type": "string"
				},
				"assignedTo": {
					"type": "object",
					"properties": {
						"_id": {
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					}
				},
				"status": {
					"type": "string"
				},
				"createdOn": {
					"type": "string"
				},
				"deadLine": {
					"type": "object",
					"properties": {
						"date": {
							"type": "string"
						},
						"time": {
							"type": "string"
						}
					}
				},
				"comments": {
					"type": "string"
				},
				"createdBy": {
					"type": "object",
					"properties": {
						"_id": {
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					}
				}
			}
		},
		"client-app-add-request": {
			"type": "object",
			"properties": {
				"status": {
					"type": "String"
				},
				"message": {
					"type": "String"
				}
			}
		},
		"client-app-get-request": {
			"type": "object",
			"properties": {
				"status": {
					"type": "String"
				},
				"message": {
					"type": "String"
				},
				"data": {
					"type": "array",
					"items": {
						"changeRequests": {
							"type": "object",
							"properties": {
								"clientId": {
									"type": "number"
								},
								"projectId": {
									"type": "number"
								},
								"changeRequest": {
									"type": "String"
								}
							}
						}
					}
				}
			}
		},
		"client-app-delete-request": {
			"type": "object",
			"properties": {
				"status": {
					"type": "String"
				},
				"message": {
					"type": "String"
				},
				"data": {
					"type": "object",
					"properties": {
						"clientId": {
							"type": "id of user"
						},
						"projectId": {
							"type": "id of project"
						},
						"changeRequest": {
							"type": "String"
						},
						"createdAt": {
							"type": "Date"
						},
						"updatedAt": {
							"type": "Date"
						}
					}
				}
			}
		},
		"client-app-add-remark": {
			"type": "object",
			"properties": {
				"status": {
					"type": "string"
				},
				"message": {
					"type": "string"
				},
				"data": {
					"type": "object",
					"properties": {
						"clientId": {
							"type": "id of user"
						},
						"projectId": {
							"type": "id of project"
						},
						"changeRequest": {
							"type": "string"
						},
						"uid": {
							"type": "uid of change request"
						},
						"deletable": {
							"type": "boolean"
						},
						"remark": {
							"type": "string"
						},
						"acknowledged": {
							"type": "boolean"
						},
						"review": {
							"type": "string"
						},
						"createdAt": {
							"type": "Date"
						},
						"updatedAt": {
							"type": "Date"
						}
					}
				}
			}
		},
		"client-app-delete-remark": {
			"type": "object",
			"properties": {
				"status": {
					"type": "string"
				},
				"message": {
					"type": "string"
				},
				"data": {
					"type": "object",
					"properties": {
						"clientId": {
							"type": "id of user"
						},
						"projectId": {
							"type": "id of project"
						},
						"changeRequest": {
							"type": "string"
						},
						"uid": {
							"type": "uid of change request"
						},
						"deletable": {
							"type": "boolean"
						},
						"remark": {
							"type": "string"
						},
						"acknowledged": {
							"type": "boolean"
						},
						"review": {
							"type": "string"
						},
						"createdAt": {
							"type": "Date"
						},
						"updatedAt": {
							"type": "Date"
						}
					}
				}
			}
		},
		"client-app-acknowledge-remark": {
			"type": "object",
			"properties": {
				"acknowledged": {
					"type": "boolean"
				}
			}
		},
		"client-app-acknowledge-remark-response": {
			"type": "object",
			"properties": {
				"status": {
					"type": "string"
				},
				"message": {
					"type": "string"
				}
			}
		},
		"client-app-add-review": {
			"type": "object",
			"properties": {
				"status": {
					"type": "string"
				},
				"message": {
					"type": "string"
				},
				"data": {
					"type": "object",
					"properties": {
						"clientId": {
							"type": "id of user"
						},
						"projectId": {
							"type": "id of project"
						},
						"changeRequest": {
							"type": "string"
						},
						"uid": {
							"type": "uid of change request"
						},
						"deletable": {
							"type": "boolean"
						},
						"remark": {
							"type": "string"
						},
						"acknowledged": {
							"type": "boolean"
						},
						"review": {
							"type": "string"
						},
						"createdAt": {
							"type": "Date"
						},
						"updatedAt": {
							"type": "Date"
						}
					}
				}
			}
		}
	}
}